import{_ as n,c as a,o as s,a as e}from"./app.ff3b22ed.js";const h='{"title":"Webpack & Gulp","description":"","frontmatter":{"date":"2021-05-17T00:00:00.000Z","title":"Webpack & Gulp","tags":[null],"describe":null},"headers":[],"relativePath":"basics/webpack-gulp.md","lastUpdated":1644197266025}',p={},t=e(`<h1 id="\u4F9D\u8D56\u6536\u96C6" tabindex="-1">\u4F9D\u8D56\u6536\u96C6 <a class="header-anchor" href="#\u4F9D\u8D56\u6536\u96C6" aria-hidden="true">#</a></h1><p>\u7F16\u8BD1 parse -&gt; \u8F6C\u5316 transform -&gt; \u751F\u6210 generate</p><p>webpack\u5728\u7F16\u8BD1\u751F\u6210AST\u4E4B\u540E\uFF0C\u5206\u6790require\u548Cimport\u8BED\u53E5\uFF0C\u89E6\u53D1\u5BF9\u5E94\u7684\u94A9\u5B50\u6536\u96C6\u76F8\u5173\u4F9D\u8D56</p><p>require: call require:commonjs:item \u94A9\u5B50\uFF0C\u5728CommonJsRequireDependencyParserPlugin.js \u4E2D</p><div class="language-js"><pre><code><span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CommonJsRequireDependency</span><span class="token punctuation">(</span>param<span class="token punctuation">.</span>string<span class="token punctuation">,</span> param<span class="token punctuation">.</span>range<span class="token punctuation">)</span><span class="token punctuation">;</span>
dep<span class="token punctuation">.</span>loc <span class="token operator">=</span> expr<span class="token punctuation">.</span>loc<span class="token punctuation">;</span>
dep<span class="token punctuation">.</span>optional <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>parser<span class="token punctuation">.</span>scope<span class="token punctuation">.</span>inTry<span class="token punctuation">;</span>
parser<span class="token punctuation">.</span>state<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addDependency</span><span class="token punctuation">(</span>dep<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>import:</p><div class="language-js"><pre><code><span class="token keyword">const</span> module <span class="token operator">=</span> parser<span class="token punctuation">.</span>state<span class="token punctuation">.</span>module<span class="token punctuation">;</span>
<span class="token keyword">const</span> dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HarmonyCompatibilityDependency</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">;</span>
dep<span class="token punctuation">.</span>loc <span class="token operator">=</span> <span class="token punctuation">{</span>
   start<span class="token operator">:</span> <span class="token punctuation">{</span>
      line<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
      column<span class="token operator">:</span> <span class="token number">0</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   end<span class="token operator">:</span> <span class="token punctuation">{</span>
      line<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
      column<span class="token operator">:</span> <span class="token number">0</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   index<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function">addDependency</span><span class="token punctuation">(</span>dep<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>\u6BCF\u4E00\u4E2A\u4F9D\u8D56(Dependency)\u7684\u5B9E\u4F53\u90FD\u5305\u542B\u4E00\u4E2Amodule\u5B57\u6BB5\uFF0C\u6307\u5411\u88AB\u4F9D\u8D56\u7684Module. \u8FD9\u6837\u901A\u8FC7Module\u7684dependencies\u6570\u7EC4\u6210\u5458\u5C31\u80FD\u627E\u51FA\u8BE5\u6A21\u5757\u6240\u4F9D\u8D56\u7684\u5176\u5B83\u6A21\u5757\u3002 webpack\u4F7F\u7528\u4E0D\u540C\u7684Dependency\u5B50\u7C7B\uFF0C\u5982AMDRequireDependency \uFF0CAMDDefineDependency \uFF0CAMDRequireArrayDependency\uFF0CCommonJsRequireDependency\uFF0CSystemImportDependency\u6765\u8868\u5F0F\u4E0D\u540C\u7684\u6A21\u5757\u52A0\u8F7D\u89C4\u8303\uFF0C \u901A\u8FC7\u5BF9\u5E94\u7684DependencyParserPlugin\u6765\u52A0\u8F7D AMD\u6216CMD\u7684\u6A21\u5757\u3002</p><h1 id="tree-shaking" tabindex="-1">tree shaking <a class="header-anchor" href="#tree-shaking" aria-hidden="true">#</a></h1><p><a href="https://www.cnblogs.com/sexintercourse/p/11901425.html" target="_blank" rel="noopener noreferrer">tree shaking</a></p><p>\u4F20\u7EDF\u7F16\u8BD1\u578B\u7684\u8BED\u8A00\u4E2D\uFF0C\u90FD\u662F\u7531\u7F16\u8BD1\u5668\u5C06Dead Code\u4ECEAST\uFF08\u62BD\u8C61\u8BED\u6CD5\u6811\uFF09\u4E2D\u5220\u9664\uFF0Cjavascript(\u89E3\u91CA\u578B) \u4E2D\u5B9E\u9645\u662F\u4EE3\u7801\u538B\u7F29\u4F18\u5316\u5DE5\u5177uglify\u5B8C\u6210DCE\u7684\uFF0C\u901A\u8FC7rollup + uglify\u548C webpack + uglify \u5C31\u80FD\u5B9E\u73B0tree shaking\u3002</p><p>ES6\u6A21\u5757\u65B0\u7279\u6027\uFF1A</p><pre><code>    \u53EA\u80FD\u4F5C\u4E3A\u6A21\u5757\u9876\u5C42\u7684\u8BED\u53E5\u51FA\u73B0
    import \u7684\u6A21\u5757\u540D\u53EA\u80FD\u662F\u5B57\u7B26\u4E32\u5E38\u91CF
    import binding \u662F immutable\u7684
</code></pre><p><strong>ES6\u6A21\u5757</strong> \u4F9D\u8D56\u5173\u7CFB\u662F\u786E\u5B9A\u7684\uFF0C\u76F8\u6BD4commonjs\u7684reqire\uFF08\u52A8\u6001\uFF0C\u6267\u884C\u540E\u624D\u53EA\u8981\u5F15\u7528\u54EA\u4E9B\u6A21\u5757\uFF09\uFF0C\u548C\u8FD0\u884C\u65F6\u7684\u72B6\u6001\u65E0\u5173\uFF0C\u53EF\u4EE5\u8FDB\u884C\u53EF\u9760\u7684\u9759\u6001\u5206\u6790\uFF0C\u6574\u4E2A\u4F9D\u8D56\u6811\u53EF\u4EE5\u88AB\u9759\u6001\u5730\u63A8\u5BFC\u51FA\u89E3\u6790\u8BED\u6CD5\u6811\u3002</p><p>package.json \u7684 &quot;sideEffects&quot; \u5C5E\u6027\u4F5C\u4E3A\u6807\u8BB0\uFF0C\u5411 compiler \u63D0\u4F9B\u63D0\u793A\uFF0C\u8868\u660E\u9879\u76EE\u4E2D\u7684\u54EA\u4E9B\u6587\u4EF6\u662F &quot;pure(\u7EAF\u7684 ES2015 \u6A21\u5757)&quot;\uFF0C\u7531\u6B64\u53EF\u4EE5\u5B89\u5168\u5730\u5220\u9664\u6587\u4EF6\u4E2D\u672A\u4F7F\u7528\u7684\u90E8\u5206\u3002</p><h1 id="qa" tabindex="-1">QA <a class="header-anchor" href="#qa" aria-hidden="true">#</a></h1><ol><li>webpack\u5982\u4F55\u6302\u8F7D\u4F9D\u8D56\uFF1F</li></ol>`,17),o=[t];function c(r,u,l,i,k,d){return s(),a("div",null,o)}var g=n(p,[["render",c]]);export{h as __pageData,g as default};
